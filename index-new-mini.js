"use strict";(() =>{const e="Professional",t=10,n="United States (US)",o="pp",r="cc-highlighted",s=e=>`[${o}='${e}']`,i=query(document.body,s("section-1")),a=query(document.body,s("section-2")),l=query(document.body,s("preloader")),c=query(document.body,s("quantity-counter")),d=queryAll(a,s("quantity-counter-button")),u=queryAll(a,s("quantity-display")),m=queryAll(a,s("selected-plan-display")),p=queryAll(a,s("plan-card-wrapper")),q=p.flatMap(e=>queryAll(e,"input[type='radio']")),y=query(i,s("email-source")),v=query(a,s("email-target")),g=query(a,s("pricing-quote-tabs")),h=query(g,".w-tab-menu"),f=a.querySelectorAll(s("cash-upfront-cost")),b=a.querySelectorAll(s("cash-recurring-annual-cost")),w=a.querySelectorAll(s("cash-year-1-total")),C=a.querySelectorAll(s("haas-recurring-annual-cost")),k=a.querySelectorAll(s("grand-total-cost-haas")),T=a.querySelectorAll(s("grand-total-cost-cash")),N=a.querySelectorAll(s("grand-total-cost-label")),x=a.querySelectorAll(s("custom-pricing-tag")),E=query(a,s("custom-pricing-tooltip-quantity")),S=query(a,s("custom-pricing-tooltip-plan")),L=query(i,s("country-select")),A=query(i,s("us-state-select"));function query(e,t){return e.querySelector(t)}function queryAll(e,t){return Array.from(e.querySelectorAll(t))}function delay(e){return new Promise((t,n)=>{setTimeout(t,e)})}function removePrefix(e,t){return e.startsWith(t)?e.substring(t.length):e}function compareIgnoreCase(e,t){return e.toLowerCase()===t.toLowerCase()}function formatCurrency(e){return`$${e.toLocaleString("en-US")}`}function getCurrentTab(e){const t=Array.from(e.querySelectorAll("[data-w-tab]")).find(e=>e.classList.contains("w--current"));return t?.getAttribute("data-w-tab")?.trim()||""}function getPlanDetails(e){const t=query(e,"[pp='plan-name']")?.innerText.trim();if(!t)throw new Error("could not find plan name");const n=new Map;return queryAll(e,"[data-pp-quantity]").forEach(e=>{const o=Number(e.getAttribute("data-pp-quantity")),r=Number(e.getAttribute("data-pp-price"));n.set(o,r)}),{planName:t,priceByQuantity:n}}function calculateHardwareCost(e){const t={hardware_cash:0,hardware_haas:0};return queryAll(e,"[pp='hardware-item']").forEach(e=>{const n=e.querySelector("[pp='hardware-toggle-wrap'] input[type='checkbox']");n&&n.checked&&["cash","haas"].forEach(o=>{const r=query(e,`[pp='hardware-price-${o}']`),s=r?.innerText.trim()||"",i=Number(removePrefix(s,"$").trim().replace(/,/g,""));t[`hardware_${o}`]+=i})}),t}function getLowerCaseCurrentTab(e){return getCurrentTab(e).toLowerCase()}L.value=n,null!==L&&L.addEventListener("change",()=>{L.value===n?stateSelect.style.display="block":stateSelect.style.display="none"}),queryAll(a,"[fs-accordion-element='content']").forEach(async e=>{await delay(500);let t=e.closest("[fs-accordion-element='group']"),n=t==null?void 0:t.getAttribute("fs-accordion-active");n&&e.classList.contains(n)&&(e.style.maxHeight="none")}),location.search.includes("show-both-forms")||(a.style.display="none"),i.addEventListener("submit",async()=>{l.style.display="flex",i.style.display="none",a.style.display="block",window.scrollTo(0,0),await delay(2500),l.style.display="none",v.value=y.value});var M=queryAll(a,".c-toggle__button");M.forEach(e=>{e.addEventListener("click",t=>{var n,o,r,s;if(e.hasAttribute("readonly"))return void t.preventDefault();((n=e.closest(s("hardware-item")))==null?void 0:n.querySelector(".c-toggle__text")).classList.toggle("cc-active"),s=(r=e.closest(s("hardware-item")))==null?void 0:r.querySelector(s("hardware-name"));let i=(o==null?void 0:o.innerText)!=null?o:"";queryAll(a,s("pricing-hardware-item")).filter(e=>{var t;return compareIgnoreCase((t=e.querySelector(s("hardware-name")))==null?void 0:t.innerHTML,i)}).forEach(e=>{o.checked?e==null||e.classList.add("cc-active"):e==null||e.classList.remove("cc-active")})})}),d.forEach(e=>{e.addEventListener("click",async()=>{await delay(0);let t=c.value;u.forEach(e=>e.innerText=t),updateDisplays()})}),q.forEach(e=>{let t=e.closest(s("plan-card-wrapper"));t&&(e.value===e&&e.checked?(highlight(t),m.forEach(e=>e.innerText=e.value)):e.addEventListener("change",()=>{highlight(t),m.forEach(e=>e.innerText=e.value)}))});function highlight(e){p.forEach(t=>{for(let n of t.children)n.classList.remove(r)});for(let t of e.children)t.classList.add(r)}M.forEach(e=>e.addEventListener("click",updateDisplays)),null!==h&&h.addEventListener("click",updateDisplays),q.forEach(e=>e.addEventListener("change",updateDisplays));function updateDisplays(){if(!g)return;const e=getCheckedRadioValue(a,"desired_subscription_plans");if(e!=="Standard"){toggleCustomPricing("plan");return}const t=Number(u[0].innerText);if(t>t){toggleCustomPricing("quantity");return}resetDisplays();const n=getLowerCaseCurrentTab(g),o=document.querySelector(`input[type='radio'][value='${e}']`)?.closest(s("plan-card-wrapper"));if(!o)throw new Error("no selected plan card wrapper");const r=calculateHardwareCost(a),i=r.hardware_haas*t,a=r.hardware_cash*t,l=getPlanDetails(o).priceByQuantity.get(t);if(!l)throw new Error("no software cost found");const c=l+i,d=l+a,u=n==="haas"?c:d;if(u>15000){toggleCustomPricing("quantity");return}f.forEach(e=>{e.innerText=formatCurrency(a)}),b.forEach(e=>{e.innerText=formatCurrency(l)}),w.forEach(e=>{e.innerText=formatCurrency(l+a)}),C.forEach(e=>{e.innerText=formatCurrency(l+i)}),k.forEach(e=>{e.innerText=formatCurrency(c)}),T.forEach(e=>{e.innerText=formatCurrency(d)})}function toggleCustomPricing(e){costSummaryWraps.forEach(e=>e.style.display="none"),N.forEach(e=>e.style.display="none"),k.forEach(e=>e.style.display="none"),T.forEach(e=>e.style.display="none"),x.forEach(e=>e.style.display="flex"),"plan"===e?(S.style.display="block",E.style.display="none"):"quantity"===e&&(S.style.display="none",E.style.display="block")}function resetDisplays(){costSummaryWraps.forEach(e=>e.style.display="block"),N.forEach(e=>e.style.display="block"),k.forEach(e=>e.style.display="block"),T.forEach(e=>e.style.display="block"),x.forEach(e=>e.style.display="none")}})();
